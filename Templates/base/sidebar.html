<link rel="stylesheet" href="{{ url_for('static', filename='styles/pharmacy.css') }}">
<aside class="sidebar">
    <div class="sidebar-header">
        <div class="sidebar-logo">Rx</div>
        <div>
            <div class="sidebar-title">ClinicEase</div>
            <div class="sidebar-subtitle">{{ current_role|capitalize }} Dashboard</div>
        </div>
    </div>

    <div class="sidebar-section-title">Main Menu</div>
    <ul class="nav-list">
        <!-- DASHBOARD (Common) -->
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('dashboard.dashboard') }}">
                <span class="icon">ğŸ </span>
                Dashboard
            </a>
        </li>

        <!-- ROLE-SPECIFIC MAIN PAGES -->
        {% if current_role == "admin" %}
            <!-- Admin sees Patients as main "Medicines" equivalent -->
            <li class="nav-item">
                <a class="nav-link active" href="/patients">
                    <span class="icon">ğŸ‘¥</span>
                    All Patients
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/doctors">
                    <span class="icon">ğŸ‘¨â€âš•ï¸</span>
                    Doctors
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/appointments">
                    <span class="icon">ğŸ‘¥</span>
                    All Appointments
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/medicine-stock">
                    <span class="icon">ğŸ’Š</span>
                    Medicine Stock
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/admin_feedbacks/admin-feedback">
                    <span class="icon">âœï¸</span>
                    Feedback
                </a>
            </li>


        {% elif current_role == "doctor" %}
            <!-- Doctor sees "My Patients" as main page -->
            <li class="nav-item">
                <a class="nav-link active" href="/patients">
                    <span class="icon">ğŸ‘¥</span>
                    My Patients
                </a>
            </li>
            <!-- Doctor also gets Medicines -->
            <li class="nav-item">
                <a class="nav-link" href="/pharmacy">
                    <span class="icon">ğŸ’Š</span>
                    Medicines
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/appointments">
                    <span class="icon">ğŸ‘¥</span>
                    My Appointments
                </a>
            </li>

        {% else %} <!-- Patient -->
            <!-- Patient gets standard patient pages -->
            <li class="nav-item">
                <a class="nav-link active" href="/pharmacy">
                    <span class="icon">ğŸ’Š</span>
                    Medicines
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/services">
                    <span class="icon">ğŸ¥</span>
                    Services
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/invoice-page">
                    <span class="icon">ğŸ“„</span>
                    Invoices
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/appointments">
                    <span class="icon">ğŸ‘¥</span>
                    My Appointments
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/doctors">
                    <span class="icon">ğŸ‘¥</span>
                    Doctors
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/patient_feedbacks/patient-feedback">
                    <span class="icon">âœï¸</span>
                    Feedback
                </a>
            </li>
                        <!-- {% if patient_id %}
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('patients_details.patient_details_page', patient_id=patient_id) }}">
                    <span class="icon">ğŸ“</span>
                    Patient Details
                </a>
            </li>
            {% endif %}
        {% endif %} -->
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('patients_details.patient_details_page', patient_id=1) }}">
                    <span class="icon">âœï¸</span>
                    Patient Details
                </a>
            </li>


        <!-- Profile Completion (Patient Only) -->
        {% if current_role == "patient" and missing_profile_fields %}
        <li class="nav-item">
            <a class="nav-link" href="/patients/complete-profile">
                <span class="icon">âš ï¸</span>
                Complete Profile
            </a>
        </li>
        {% endif %}
        <li class="nav-item">
            <a class="nav-link" href="/settings">
                <span class="icon">âš™ï¸</span>
                    Settings
            </a>
        </li>
    </ul>

    <div class="sidebar-footer">
        <div><strong>TruCare Clinic</strong></div>
        <div>{{ current_role|capitalize }} Portal v1.0</div>
    </div>
</aside>