<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Chatbot</title>

    <!-- Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,0,0&family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0" />

    <!-- Your Styles -->
    <link rel="stylesheet" href="/static/styles/chatbot.css"/>

    <!-- Botpress Style Overrides -->
    <style>
      #webchat .bpFab {
        display: none !important;
      }

      #webchat .bpWebchat {
        width: 100% !important;
        height: 100% !important;
        max-width: 100% !important;
        max-height: 100% !important;
        border-radius: 0 !important;
        box-shadow: none !important;
        position: unset !important;
      }
    </style>

    <!-- Botpress Script -->
    <script src="https://cdn.botpress.cloud/webchat/v3.3/inject.js"></script>
  </head>

  <body>
    <!-- Chatbot Toggle Button -->
    <button id="chatbot-toggler">
      <span class="material-symbols-outlined">mode_comment</span>
      <span class="material-symbols-rounded">close</span>
    </button>

    <!-- Chatbot Popup -->
    <div class="chatbot-popup">
      <!-- Header -->
      <div class="chat-header">
        <div class="header-info">
          <svg 
            class="chatbot-logo"
            xmlns="http://www.w3.org/2000/svg"
            width="50"
            height="50"
            viewBox="0 0 1024 1024"
          >
            <path d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9z"/>
          </svg>
          <h2 class="logo-text">Chatbot</h2>
        </div>
        <button id="close-chatbot" class="material-symbols-rounded">keyboard_arrow_down</button>
      </div>

      <!-- Chat Body (Botpress Goes Here) -->
      <div class="chat-body">
        <div id="webchat" style="width: 100%; height: 100%;"></div>
      </div>

      <!-- Chat Footer -->
      <div class="chat-footer">
        <form action="#" class="chat-form">
          <textarea placeholder="Message..." class="message-input" required></textarea>
          <div class="chat-controls">
            <button type="button" id="emoji-picker" class="material-symbols-rounded">sentiment_satisfied</button>
            <div class="file-upload-wrapper">
              <input type="file" accept="images/*" id="file-input" hidden>
              <button type="button" id="file-upload" class="material-symbols-rounded">attach_file</button>
            </div>
            <button type="submit" id="send-message" class="material-symbols-rounded">arrow_upward</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Emoji Picker -->
    <script src="https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"></script>

    <!-- Your Script -->
    <script src="/static/scripts/chatbot.js"></script>

    <!-- Botpress Init -->
    <script>
      window.botpress.on("webchat:ready", () => {
        window.botpress.open();
      });

      window.botpress.init({
        botId: "914411e5-0a98-44f9-860d-30862603607e",
        clientId: "41e099ae-a38e-4bf4-91f0-a783824454ce",
        selector: "#webchat",
        configuration: {
          version: "v2",
          botName: "Brand Help Assistant",
          color: "#3276EA",
          headerVariant: "glass",
          themeMode: "light",
          footer: "",
          soundEnabled: false,
          feedbackEnabled: false,
          proactiveMessageEnabled: false
        }
      });
    </script>
  </body>
</html>
